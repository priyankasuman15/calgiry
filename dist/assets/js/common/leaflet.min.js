"use strict";function ready(e){"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e)}var calgary,locations,map,marker;function xhrLocations(){xhrLoadJSON(["../../json/locations.json"],1e3,getLocations)}function getLocations(){locations=this[0],makeMap(calgary=locations.features[0])}ready(function(){xhrLocations()});var boundaries=[[51.33576,-114.536591],[51.33576,-113.904877],[50.915156,-113.904877],[50.915156,-114.536591]];function drawMapMarker(e){void 0!==marker&&map.removeLayer(marker);var o=e.geometry.geometries[0].coordinates[1]||51.083067,a=e.geometry.geometries[0].coordinates[0]||-113.995535;boundaries.push([o,a]);var t=e.properties;(marker=L.marker([o,a]).addTo(map)).bindPopup("".concat(t.venue)),marker.openPopup()}function makeMap(e){var o="footer",a=document.querySelector("#leaflet-".concat(o));a.style.position="relative",a.style.width="100%",a.style.height="100%",a.style.zIndex=1;var t=e.geometry.geometries[0].coordinates[1],r=e.geometry.geometries[0].coordinates[0];map=L.map("leaflet-".concat(o),{zoomControl:!1,maxBounds:boundaries}).fitBounds(boundaries).setView([t,r],12),L.control.zoom({position:"topright"}).addTo(map),L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}",{attribution:'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://mapbox.com">Mapbox</a>',maxZoom:18,id:"mapbox.streets",accessToken:"pk.eyJ1IjoiZGVlcGVyYmx1ZTY0IiwiYSI6ImNqY2pvbXVqcTMwMnIycXBnbGpnMDFub3QifQ.QkVqFaNNWv_-uTTJz-HR2A"}).addTo(map),drawMapMarker(e),map.on("drag",function(){map.panInsideBounds(boundaries)})}