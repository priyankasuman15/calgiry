"use strict";var PCancelable=require("p-cancelable"),targetCache=new WeakMap,cleanCache=function(e,t){targetCache.get(e).delete(t),targetCache.get(e).size||targetCache.delete(e)};module.exports=function(c,n){if(n=Object.assign({target:document},n),targetCache.has(n.target)&&targetCache.get(n.target).has(c))return targetCache.get(n.target).get(c);var e=new PCancelable(function(e,a){var r;e(function(){cancelAnimationFrame(r),cleanCache(n.target,c)}),function e(){var t=n.target.querySelector(c);t?(a(t),cleanCache(n.target,c)):r=requestAnimationFrame(e)}()});return targetCache.has(n.target)?targetCache.get(n.target).set(c,e):targetCache.set(n.target,new Map([[c,e]])),e};